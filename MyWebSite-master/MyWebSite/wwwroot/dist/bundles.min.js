/*! AdminLTE app.js
* ================
* Main JS application file for AdminLTE v2. This file
* should be included in all pages. It controls some layout
* options and implements exclusive AdminLTE plugins.
*
* @Author  Almsaeed Studio
* @Support <https://www.almsaeedstudio.com>
* @Email   <abdullah@almsaeedstudio.com>
* @version 2.4.0
* @repository git://github.com/almasaeed2010/AdminLTE.git
* @license MIT <http://opensource.org/licenses/MIT>
*/
var _hmt,hm,s,IsAuthenticated,app;if(typeof jQuery=="undefined")throw new Error("AdminLTE requires jQuery");+function(n){"use strict";function u(r){return this.each(function(){var f=n(this),u=f.data(i),o;if(u||(o=n.extend({},e,f.data(),typeof r=="object"&&r),f.data(i,u=new t(f,o))),typeof u=="string"){if(typeof u[r]=="undefined")throw new Error("No method named "+r);u[r]()}})}var i="lte.boxrefresh",e={source:"",params:{},trigger:".refresh-btn",content:".box-body",loadInContent:!0,responseType:"",overlayTemplate:'<div class="overlay"><div class="fa fa-refresh fa-spin"><\/div><\/div>',onLoadStart:function(){},onLoadDone:function(n){return n}},r={data:'[data-widget="box-refresh"]'},t=function(t,i){if(this.element=t,this.options=i,this.$overlay=n(i.overlay),i.source==="")throw new Error("Source url was not defined. Please specify a url in your BoxRefresh source option.");this._setUpListeners();this.load()},f;t.prototype.load=function(){this._addOverlay();this.options.onLoadStart.call(n(this));n.get(this.options.source,this.options.params,function(t){this.options.loadInContent&&n(this.options.content).html(t);this.options.onLoadDone.call(n(this),t);this._removeOverlay()}.bind(this),this.options.responseType!==""&&this.options.responseType)};t.prototype._setUpListeners=function(){n(this.element).on("click",r.trigger,function(n){n&&n.preventDefault();this.load()}.bind(this))};t.prototype._addOverlay=function(){n(this.element).append(this.$overlay)};t.prototype._removeOverlay=function(){n(this.element).remove(this.$overlay)};f=n.fn.boxRefresh;n.fn.boxRefresh=u;n.fn.boxRefresh.Constructor=t;n.fn.boxRefresh.noConflict=function(){return n.fn.boxRefresh=f,this};n(window).on("load",function(){n(r.data).each(function(){u.call(n(this))})})}(jQuery)+function(n){"use strict";function e(t){return this.each(function(){var r=n(this),f=r.data(u),e;if(f||(e=n.extend({},s,r.data(),typeof t=="object"&&t),r.data(u,f=new i(r,e))),typeof t=="string"){if(typeof f[t]=="undefined")throw new Error("No method named "+t);f[t]()}})}var u="lte.boxwidget",s={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"},t={data:".box",collapsed:".collapsed-box",body:".box-body",footer:".box-footer",tools:".box-tools"},f={collapsed:"collapsed-box"},r={collapsed:"collapsed.boxwidget",expanded:"expanded.boxwidget",removed:"removed.boxwidget"},i=function(n,t){this.element=n;this.options=t;this._setUpListeners()},o;i.prototype.toggle=function(){var i=!n(this.element).is(t.collapsed);i?this.collapse():this.expand()};i.prototype.expand=function(){var u=n.Event(r.expanded),e=this.options.collapseIcon,i=this.options.expandIcon;n(this.element).removeClass(f.collapsed);n(this.element).find(t.tools).find("."+i).removeClass(i).addClass(e);n(this.element).find(t.body+", "+t.footer).slideDown(this.options.animationSpeed,function(){n(this.element).trigger(u)}.bind(this))};i.prototype.collapse=function(){var u=n.Event(r.collapsed),i=this.options.collapseIcon,e=this.options.expandIcon;n(this.element).find(t.tools).find("."+i).removeClass(i).addClass(e);n(this.element).find(t.body+", "+t.footer).slideUp(this.options.animationSpeed,function(){n(this.element).addClass(f.collapsed);n(this.element).trigger(u)}.bind(this))};i.prototype.remove=function(){var t=n.Event(r.removed);n(this.element).slideUp(this.options.animationSpeed,function(){n(this.element).trigger(t);n(this.element).remove()}.bind(this))};i.prototype._setUpListeners=function(){var t=this;n(this.element).on("click",this.options.collapseTrigger,function(n){n&&n.preventDefault();t.toggle()});n(this.element).on("click",this.options.removeTrigger,function(n){n&&n.preventDefault();t.remove()})};o=n.fn.boxWidget;n.fn.boxWidget=e;n.fn.boxWidget.Constructor=i;n.fn.boxWidget.noConflict=function(){return n.fn.boxWidget=o,this};n(window).on("load",function(){n(t.data).each(function(){e.call(n(this))})})}(jQuery)+function(n){"use strict";function e(t){return this.each(function(){var r=n(this),f=r.data(u),e;f||(e=n.extend({},s,r.data(),typeof t=="object"&&t),r.data(u,f=new i(r,e)));typeof t=="string"&&f.toggle()})}var u="lte.controlsidebar",s={slide:!0},t={sidebar:".control-sidebar",data:'[data-toggle="control-sidebar"]',open:".control-sidebar-open",bg:".control-sidebar-bg",wrapper:".wrapper",content:".content-wrapper",boxed:".layout-boxed"},r={open:"control-sidebar-open",fixed:"fixed"},f={collapsed:"collapsed.controlsidebar",expanded:"expanded.controlsidebar"},i=function(n,t){this.element=n;this.options=t;this.hasBindedResize=!1;this.init()},o;i.prototype.init=function(){if(!n(this.element).is(t.data))n(this).on("click",this.toggle);this.fix();n(window).resize(function(){this.fix()}.bind(this))};i.prototype.toggle=function(i){i&&i.preventDefault();this.fix();n(t.sidebar).is(t.open)||n("body").is(t.open)?this.collapse():this.expand()};i.prototype.expand=function(){this.options.slide?n(t.sidebar).addClass(r.open):n("body").addClass(r.open);n(this.element).trigger(n.Event(f.expanded))};i.prototype.collapse=function(){n("body, "+t.sidebar).removeClass(r.open);n(this.element).trigger(n.Event(f.collapsed))};i.prototype.fix=function(){n("body").is(t.boxed)&&this._fixForBoxed(n(t.bg))};i.prototype._fixForBoxed=function(i){i.css({position:"absolute",height:n(t.wrapper).height()})};o=n.fn.controlSidebar;n.fn.controlSidebar=e;n.fn.controlSidebar.Constructor=i;n.fn.controlSidebar.noConflict=function(){return n.fn.controlSidebar=o,this};n(document).on("click",t.data,function(t){t&&t.preventDefault();e.call(n(this),"toggle")})}(jQuery)+function(n){"use strict";function u(r){return this.each(function(){var u=n(this),f=u.data(i);f||u.data(i,f=new t(u));typeof r=="string"&&f.toggle(u)})}var i="lte.directchat",r={data:'[data-widget="chat-pane-toggle"]',box:".direct-chat"},e={open:"direct-chat-contacts-open"},t=function(n){this.element=n},f;t.prototype.toggle=function(n){n.parents(r.box).first().toggleClass(e.open)};f=n.fn.directChat;n.fn.directChat=u;n.fn.directChat.Constructor=t;n.fn.directChat.noConflict=function(){return n.fn.directChat=f,this};n(document).on("click",r.data,function(t){t&&t.preventDefault();u.call(n(this),"toggle")})}(jQuery)+function(n){"use strict";function f(t){return this.each(function(){var f=n(this),r=f.data(u),e;if(r||(e=n.extend({},o,f.data(),typeof t=="object"&&t),f.data(u,r=new i(e))),typeof t=="string"){if(typeof r[t]=="undefined")throw new Error("No method named "+t);r[t]()}})}var u="lte.layout",o={slimscroll:!0,resetHeight:!0},t={wrapper:".wrapper",contentWrapper:".content-wrapper",layoutBoxed:".layout-boxed",mainFooter:".main-footer",mainHeader:".main-header",sidebar:".sidebar",controlSidebar:".control-sidebar",fixed:".fixed",sidebarMenu:".sidebar-menu",logo:".main-header .logo"},r={fixed:"fixed",holdTransition:"hold-transition"},i=function(n){this.options=n;this.bindedResize=!1;this.activate()},e;i.prototype.activate=function(){this.fix();this.fixSidebar();n("body").removeClass(r.holdTransition);this.options.resetHeight&&n("body, html, "+t.wrapper).css({height:"auto","min-height":"100%"});this.bindedResize||(n(window).resize(function(){this.fix();this.fixSidebar();n(t.logo+", "+t.sidebar).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){this.fix();this.fixSidebar()}.bind(this))}.bind(this)),this.bindedResize=!0);n(t.sidebarMenu).on("expanded.tree",function(){this.fix();this.fixSidebar()}.bind(this));n(t.sidebarMenu).on("collapsed.tree",function(){this.fix();this.fixSidebar()}.bind(this))};i.prototype.fix=function(){var e,u;n(t.layoutBoxed+" > "+t.wrapper).css("overflow","hidden");var o=n(t.mainFooter).outerHeight()||0,s=n(t.mainHeader).outerHeight()+o,i=n(window).height(),f=n(t.sidebar).height()||0;n("body").hasClass(r.fixed)?n(t.contentWrapper).css("min-height",i-o):(i>=f?(n(t.contentWrapper).css("min-height",i-s),e=i-s):(n(t.contentWrapper).css("min-height",f),e=f),u=n(t.controlSidebar),typeof u!="undefined"&&u.height()>e&&n(t.contentWrapper).css("min-height",u.height()))};i.prototype.fixSidebar=function(){if(!n("body").hasClass(r.fixed)){typeof n.fn.slimScroll!="undefined"&&n(t.sidebar).slimScroll({destroy:!0}).height("auto");return}this.options.slimscroll&&typeof n.fn.slimScroll!="undefined"&&n(t.sidebar).slimScroll({height:n(window).height()-n(t.mainHeader).height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})};e=n.fn.layout;n.fn.layout=f;n.fn.layout.Constuctor=i;n.fn.layout.noConflict=function(){return n.fn.layout=e,this};n(window).on("load",function(){f.call(n("body"))})}(jQuery)+function(n){"use strict";function f(t){return this.each(function(){var i=n(this),u=i.data(e),f;u||(f=n.extend({},s,i.data(),typeof t=="object"&&t),i.data(e,u=new r(f)));t==="toggle"&&u.toggle()})}var e="lte.pushmenu",s={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},i={collapsed:".sidebar-collapse",open:".sidebar-open",mainSidebar:".main-sidebar",contentWrapper:".content-wrapper",searchInput:".sidebar-form .form-control",button:'[data-toggle="push-menu"]',mini:".sidebar-mini",expanded:".sidebar-expanded-on-hover",layoutFixed:".fixed"},t={collapsed:"sidebar-collapse",open:"sidebar-open",mini:"sidebar-mini",expanded:"sidebar-expanded-on-hover",expandFeature:"sidebar-mini-expand-feature",layoutFixed:"fixed"},u={expanded:"expanded.pushMenu",collapsed:"collapsed.pushMenu"},r=function(n){this.options=n;this.init()},o;r.prototype.init=function(){(this.options.expandOnHover||n("body").is(i.mini+i.layoutFixed))&&(this.expandOnHover(),n("body").addClass(t.expandFeature));n(i.contentWrapper).click(function(){n(window).width()<=this.options.collapseScreenSize&&n("body").hasClass(t.open)&&this.close()}.bind(this));n(i.searchInput).click(function(n){n.stopPropagation()})};r.prototype.toggle=function(){var r=n(window).width(),i=!n("body").hasClass(t.collapsed);r<=this.options.collapseScreenSize&&(i=n("body").hasClass(t.open));i?this.close():this.open()};r.prototype.open=function(){var i=n(window).width();i>this.options.collapseScreenSize?n("body").removeClass(t.collapsed).trigger(n.Event(u.expanded)):n("body").addClass(t.open).trigger(n.Event(u.expanded))};r.prototype.close=function(){var i=n(window).width();i>this.options.collapseScreenSize?n("body").addClass(t.collapsed).trigger(n.Event(u.collapsed)):n("body").removeClass(t.open+" "+t.collapsed).trigger(n.Event(u.collapsed))};r.prototype.expandOnHover=function(){n(i.mainSidebar).hover(function(){n("body").is(i.mini+i.collapsed)&&n(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){n("body").is(i.expanded)&&this.collapse()}.bind(this))};r.prototype.expand=function(){setTimeout(function(){n("body").removeClass(t.collapsed).addClass(t.expanded)},this.options.expandTransitionDelay)};r.prototype.collapse=function(){setTimeout(function(){n("body").removeClass(t.expanded).addClass(t.collapsed)},this.options.expandTransitionDelay)};o=n.fn.pushMenu;n.fn.pushMenu=f;n.fn.pushMenu.Constructor=r;n.fn.pushMenu.noConflict=function(){return n.fn.pushMenu=o,this};n(document).on("click",i.button,function(t){t.preventDefault();f.call(n(this),"toggle")});n(window).on("load",function(){f.call(n(i.button))})}(jQuery)+function(n){"use strict";function u(r){return this.each(function(){var f=n(this),u=f.data(i),o;if(u||(o=n.extend({},e,f.data(),typeof r=="object"&&r),f.data(i,u=new t(f,o))),typeof u=="string"){if(typeof u[r]=="undefined")throw new Error("No method named "+r);u[r]()}})}var i="lte.todolist",e={onCheck:function(n){return n},onUnCheck:function(n){return n}},r={data:'[data-widget="todo-list"]'},o={done:"done"},t=function(n,t){this.element=n;this.options=t;this._setUpListeners()},f;t.prototype.toggle=function(n){if(n.parents(r.li).first().toggleClass(o.done),!n.prop("checked")){this.unCheck(n);return}this.check(n)};t.prototype.check=function(n){this.options.onCheck.call(n)};t.prototype.unCheck=function(n){this.options.onUnCheck.call(n)};t.prototype._setUpListeners=function(){var t=this;n(this.element).on("change ifChanged","input:checkbox",function(){t.toggle(n(this))})};f=n.fn.todoList;n.fn.todoList=u;n.fn.todoList.Constructor=t;n.fn.todoList.noConflict=function(){return n.fn.todoList=f,this};n(window).on("load",function(){n(r.data).each(function(){u.call(n(this))})})}(jQuery)+function(n){"use strict";function e(t){return this.each(function(){var i=n(this),e=i.data(u),f;e||(f=n.extend({},s,i.data(),typeof t=="object"&&t),i.data(u,new r(i,f)))})}var u="lte.tree",s={animationSpeed:500,accordion:!0,followLink:!1,trigger:".treeview a"},t={tree:".tree",treeview:".treeview",treeviewMenu:".treeview-menu",open:".menu-open, .active",li:"li",data:'[data-widget="tree"]',active:".active"},i={open:"menu-open",tree:"tree"},f={collapsed:"collapsed.tree",expanded:"expanded.tree"},r=function(r,u){this.element=r;this.options=u;n(this.element).addClass(i.tree);n(t.treeview+t.active,this.element).addClass(i.open);this._setUpListeners()},o;r.prototype.toggle=function(n,r){var f=n.next(t.treeviewMenu),u=n.parent(),e=u.hasClass(i.open);u.is(t.treeview)&&(this.options.followLink&&n.attr("href")!=="#"||r.preventDefault(),e?this.collapse(f,u):this.expand(f,u))};r.prototype.expand=function(r,u){var s=n.Event(f.expanded),e,o;this.options.accordion&&(e=u.siblings(t.open),o=e.children(t.treeviewMenu),this.collapse(o,e));u.addClass(i.open);r.slideDown(this.options.animationSpeed,function(){n(this.element).trigger(s)}.bind(this))};r.prototype.collapse=function(r,u){var e=n.Event(f.collapsed);r.find(t.open).removeClass(i.open);u.removeClass(i.open);r.slideUp(this.options.animationSpeed,function(){r.find(t.open+" > "+t.treeview).slideUp();n(this.element).trigger(e)}.bind(this))};r.prototype._setUpListeners=function(){var t=this;n(this.element).on("click",this.options.trigger,function(i){t.toggle(n(this),i)})};o=n.fn.tree;n.fn.tree=e;n.fn.tree.Constructor=r;n.fn.tree.noConflict=function(){return n.fn.tree=o,this};n(window).on("load",function(){n(t.data).each(function(){e.call(n(this))})})}(jQuery);_hmt=_hmt||[];hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?ba97b9ac7e6eb8c1d4e5e331e329edd0";s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);$("#loginLink").click(function(){window.location.href="/Account/Login?ReturnUrl="+encodeURIComponent(window.location.href)});$.ajaxSetup({type:"POST",error:function(n){switch(n.status){case 500:window.location.href="/#!/Error?code="+n.status;break;case 401:window.location.href="/Account/Login?ReturnUrl="+encodeURIComponent(window.location.href);break;default:window.location.href="/#!/Error?code="+n.status}}});$(document).ajaxStart(function(){window.Pace.restart()});$("input[name='languageOpts']").change(function(){switch($(this).data("culture")){case"zh":$.cookie(".AspNetCore.Culture","c=zh-CN|uic=zh-CN",{path:"/"});window.location.reload();break;case"en":$.cookie(".AspNetCore.Culture","c=en-US|uic=en-US",{path:"/"});window.location.reload();break;default:console.log("语言选择有误！")}});IsAuthenticated=function(){var n=null;return $.ajax({type:"GET",url:"/Account/IsAuthenticated",async:!1,success:function(t){n=t}}),n};app=angular.module("app",["ui.router","angular-ladda"]);app.run(["$rootScope","$transitions","$state",function(n,t){n.resourcePath=window.environment=="Production"?document.location.protocol+"//mysite.bj.bcebos.com/":"/";var i=["EssayCreate","EssayEdit"];t.onStart({},function(n){var r=n.to().name,t;if($.inArray(r,i)>=0&&(t=IsAuthenticated(),!t))return window.location.href="/Account/Login?ReturnUrl="+encodeURIComponent(window.location.href),!1;$("html,body").scrollTop(0)})}]);app.config(["$stateProvider","$urlRouterProvider",function(n,t){t.otherwise("/");n.state("MyProfile",{url:"/",templateUrl:"App/Home/Home.html"}).state("EssayIndex",{url:"/EssayIndex",params:{pageIndex:null,essayCatalogID:null,essayArchiveID:null,essayTagID:null},templateUrl:"App/Essay/Index.html"}).state("MenuManagement",{url:"/Configuration/MenuManagement",templateUrl:"App/Configuration/MenuManagement/MenuManagement.html"}).state("ApiSimulator",{url:"/Tools/ApiSimulator",templateUrl:"App/Tools/ApiSimulator/ApiSimulator.html"}).state("SiteAnalytics",{url:"/Tools/SiteAnalytics",templateUrl:"App/Tools/SiteAnalytics/SiteAnalytics.html"}).state("EssayCreate",{url:"/EssayCreate",templateUrl:"App/Essay/Create.html"}).state("EssayDetails",{url:"/EssayDetails/:id",templateUrl:"App/Essay/Details.html"}).state("EssayEdit",{url:"/EssayEdit/:id",templateUrl:"App/Essay/Edit.html"}).state("Error",{url:"/Error",templateUrl:"App/Home/Error.html"})}]);$(window).scroll(function(){var n=document.body.scrollTop||document.documentElement.scrollTop;n>400?$("#back-to-top").show():$("#back-to-top").hide()});$("#back-to-top").click(function(){$("html,body").animate({scrollTop:0},500)});$(function(){"use strict";function nt(n){if(typeof Storage!="undefined")return localStorage.getItem(n);window.alert("Please use a modern browser to properly view this template!")}function tt(n,t){typeof Storage!="undefined"?localStorage.setItem(n,t):window.alert("Please use a modern browser to properly view this template!")}function o(n){$("body").toggleClass(n);e.fixSidebar();$("body").hasClass("fixed")&&n=="fixed"&&(f.expandOnHover(),e.activate());t.fix()}function s(n){return $.each(i,function(n){$("body").removeClass(i[n])}),$("body").addClass(n),tt("skin",n),!1}function it(){var n=nt("skin");n&&$.inArray(n,i)&&s(n);$("[data-skin]").on("click",function(n){$(this).hasClass("knob")||(n.preventDefault(),s($(this).data("skin")))});$("[data-layout]").on("click",function(){o($(this).data("layout"))});$("[data-controlsidebar]").on("click",function(){o($(this).data("controlsidebar"));var n=!t.options.slide;t.options.slide=n;n||$(".control-sidebar").removeClass("control-sidebar-open")});$('[data-sidebarskin="toggle"]').on("click",function(){var n=$(".control-sidebar");n.hasClass("control-sidebar-dark")?(n.removeClass("control-sidebar-dark"),n.addClass("control-sidebar-light")):(n.removeClass("control-sidebar-light"),n.addClass("control-sidebar-dark"))});$('[data-enable="expandOnHover"]').on("click",function(){$(this).attr("disabled",!0);f.expandOnHover();$("body").hasClass("sidebar-collapse")||$('[data-layout="sidebar-collapse"]').click()});$("body").hasClass("fixed")&&$('[data-layout="fixed"]').attr("checked","checked");$("body").hasClass("layout-boxed")&&$('[data-layout="layout-boxed"]').attr("checked","checked");$("body").hasClass("sidebar-collapse")&&$('[data-layout="sidebar-collapse"]').attr("checked","checked")}var r,h,c,l,a,v,y,p,w,b,k,d,g;$('[data-toggle="control-sidebar"]').controlSidebar();$('[data-toggle="push-menu"]').pushMenu();var f=$('[data-toggle="push-menu"]').data("lte.pushmenu"),t=$('[data-toggle="control-sidebar"]').data("lte.controlsidebar"),e=$("body").data("lte.layout"),i=["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"];r=$("<div />",{id:"control-sidebar-theme-demo-options-tab","class":"tab-pane active"});h=$("<li />",{"class":"active"}).html("<a href='#control-sidebar-theme-demo-options-tab' data-toggle='tab'><i class=\"fa fa-wrench\"><\/i><\/a>");$('[href="#control-sidebar-home-tab"]').parent().before(h);var u=$("<div />"),n=$("<ul />",{"class":"list-unstyled clearfix"}),rt=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-blue" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px; background: #367fa9"><\/span><span class="bg-light-blue" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Blue<\/p>');n.append(rt);c=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-black" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div style="box-shadow: 0 0 2px rgba(0,0,0,0.1)" class="clearfix"><span style="display:block; width: 20%; float: left; height: 7px; background: #fefefe"><\/span><span style="display:block; width: 80%; float: left; height: 7px; background: #fefefe"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Black<\/p>');n.append(c);l=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-purple" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-purple-active"><\/span><span class="bg-purple" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Purple<\/p>');n.append(l);a=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-green" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-green-active"><\/span><span class="bg-green" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Green<\/p>');n.append(a);v=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-red" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-red-active"><\/span><span class="bg-red" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Red<\/p>');n.append(v);y=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-yellow" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-yellow-active"><\/span><span class="bg-yellow" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #222d32"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin">Yellow<\/p>');n.append(y);p=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-blue-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px; background: #367fa9"><\/span><span class="bg-light-blue" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Blue Light<\/p>');n.append(p);w=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-black-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div style="box-shadow: 0 0 2px rgba(0,0,0,0.1)" class="clearfix"><span style="display:block; width: 20%; float: left; height: 7px; background: #fefefe"><\/span><span style="display:block; width: 80%; float: left; height: 7px; background: #fefefe"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Black Light<\/p>');n.append(w);b=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-purple-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-purple-active"><\/span><span class="bg-purple" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Purple Light<\/p>');n.append(b);k=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-green-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-green-active"><\/span><span class="bg-green" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Green Light<\/p>');n.append(k);d=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-red-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-red-active"><\/span><span class="bg-red" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Red Light<\/p>');n.append(d);g=$("<li />",{style:"float:left; width: 33.33333%; padding: 5px;"}).append('<a href="javascript:void(0)" data-skin="skin-yellow-light" style="display: block; box-shadow: 0 0 3px rgba(0,0,0,0.4)" class="clearfix full-opacity-hover"><div><span style="display:block; width: 20%; float: left; height: 7px;" class="bg-yellow-active"><\/span><span class="bg-yellow" style="display:block; width: 80%; float: left; height: 7px;"><\/span><\/div><div><span style="display:block; width: 20%; float: left; height: 20px; background: #f9fafc"><\/span><span style="display:block; width: 80%; float: left; height: 20px; background: #f4f5f7"><\/span><\/div><\/a><p class="text-center no-margin" style="font-size: 12px">Yellow Light<\/p>');n.append(g);u.append('<h4 class="control-sidebar-heading">Skins<\/h4>');u.append(n);r.append(u);$("#control-sidebar-home-tab").after(r);it();$('[data-toggle="tooltip"]').tooltip()});app.controller("MenuManagementController",["$scope",function(n){n.isAuthenticated=IsAuthenticated();n.editMenu=function(t){n.selectedMenu=t};n.addMenu=function(){var t={name:"<新增菜单>",icon:"fa-circle-o",templateUrl:""};n.navMenus.push(t);n.selectedMenu=t};n.deleteMenu=function(n,t){$.confirm({icon:"fa fa-info",title:"删除",content:"确认删除菜单["+n.name+"]？",type:"dark",closeIcon:!0,typeAnimated:!0,buttons:{confirm:{text:"确定",btnClass:"btn-dark",action:function(){$(t.target).closest("li").remove()}},cancel:{text:"取消",btnClass:"btn-dark"}}})};n.save=function(){n.submitting=!0;$.ajax({type:"POST",url:"/Configuration/MenuManagement/Save",data:{},success:function(){},complete:function(){n.submitting=!1;n.$apply()}})};n.selectedMenu={};$.ajax({type:"GET",url:"/Configuration/MenuManagement/GetMenus",success:function(t){n.navMenus=t;n.$apply();setTimeout(function(){$(".dd").nestable()},100)}})}]);app.controller("EssayCreateController",["$scope","$state",function(n,t){var i=CKEDITOR.replace("editorEssay");$(".select2").select2({language:"zh-CN",allowClear:!0});n.$on("$destroy",function(){i.destroy(!0)});$.ajax({type:"GET",url:"/Essay/Essay/Create",success:function(t){n.vm=t;n.$apply()}});n.onSubmit=function(){var r=i.getData(),u;if(r=="")return $.alert({icon:"fa fa-warning",title:"警告",type:"orange",closeIcon:!0,content:"尚未输入内容.",buttons:{close:{text:"确定",btnClass:"btn-warning"}}}),!1;n.vm.essay.content=r;u=$.map(n.vm.essayTags,function(n){if(n.selected)return n.essayTagID});n.submitting=!0;$.ajax({type:"POST",url:"/Essay/Essay/Create",data:{essay:n.vm.essay,selectedTags:u},success:function(n){t.go("EssayDetails",{id:n})},complete:function(){n.submitting=!1}})}}]);app.controller("EssayDetailsController",["$scope","$state","$stateParams",function(n,t,i){n.isAuthenticated=IsAuthenticated();$.ajax({type:"GET",url:"/Essay/Essay/Details/"+i.id,success:function(t){n.essay=t;n.$apply();$("#essayContent").append(n.essay.content);$("pre code").each(function(n,t){hljs.highlightBlock(t)});var r=new Gitalk({id:"/EssayDetails/"+i.id,clientID:"b3311f7c6659a89a1b2a",clientSecret:"9576ec7765d9a5a7b3eb51bb8b51c401dafa8fc8",repo:"MySiteComment",owner:"lizzie2008",admin:["lizzie2008"]});r.render("gitalk-container")}})}]);app.controller("EssayEditController",["$scope","$state","$stateParams",function(n,t,i){var r={};n.$on("$destroy",function(){r.destroy(!0)});$.ajax({type:"GET",url:"/Essay/Essay/Edit/"+i.id,success:function(t){n.vm=t;n.$apply();r=CKEDITOR.replace("editorEssay");r.setData(t.essay.content)}});n.onSubmit=function(){var i=r.getData(),u;if(i=="")return $.alert({icon:"fa fa-warning",title:"警告",type:"orange",closeIcon:!0,content:"尚未输入内容.",buttons:{close:{text:"确定",btnClass:"btn-warning"}}}),!1;n.vm.essay.content=i;u=$.map(n.vm.essayTags,function(n){if(n.selected)return n.essayTagID});n.submitting=!0;$.ajax({type:"POST",url:"/Essay/Essay/Edit",data:{essay:n.vm.essay,selectedTags:u},success:function(i){n.submitting=!1;t.go("EssayDetails",{id:i})},complete:function(){n.submitting=!1}})}}]);app.controller("EssayIndexController",["$scope","$stateParams",function(n,t){n.isAuthenticated=IsAuthenticated();$(".geopattern").each(function(){$(this).geopattern($(this).data("pattern-id"))});$.ajax({type:"GET",url:"/Essay/Essay/Index",data:{pageIndex:t.pageIndex,pageSize:5,essayCatalogID:t.essayCatalogID,essayArchiveID:t.essayArchiveID,essayTagID:t.essayTagID},success:function(t){n.vm=t;n.$apply()}})}]);app.controller("ErrorController",["$scope",function(n){n.code=window.location.hash.split("?")[1].split("=")[1]}]);app.controller("HomeController",["$scope",function(n){$.ajax({type:"GET",url:"/Home/GetMyProfile",success:function(t){n.projects=t.projects.reverse();n.$apply();$("img.lazyload").lazyload().click(function(){var n=$(this).attr("data-original");$.dialog({icon:"fa fa-photo",title:"预览",type:"dark",content:"<image src='"+n+"' class='img-responsive img-rounded'/>",columnClass:"col-md-10 col-md-offset-1",backgroundDismiss:!0})})}})}]);app.controller("ApiSimulatorController",["$scope",function(n){$.ajax({type:"GET",url:"/Tools/ApiSimulator/GetApiRequestList",success:function(t){n.apiList=t;n.selectedApi=null;n.$apply()}});n.onSubmit=function(){n.submitting=!0;$.ajax({type:"POST",url:"/Tools/ApiSimulator/InvokApi",data:n.selectedApi,success:function(t){n.response=t;n.$apply()},complete:function(){n.submitting=!1;n.$apply()}})}}]);app.controller("SiteAnalyticsController",["$scope",function(){var r={"江苏":"CN-32","贵州":"CN-52","云南":"CN-53","重庆":"CN-50","四川":"CN-51","上海":"CN-31","西藏":"CN-54","浙江":"CN-33","内蒙古":"CN-15","山西":"CN-14","福建":"CN-16","天津":"CN-12","河北":"CN-13","北京":"CN-11","安徽":"CN-34","江西":"CN-36","山东":"CN-37","河南":"CN-41","湖南":"CN-43","湖北":"CN-42","广西":"CN-45","广东":"CN-44","海南":"CN-46","新疆":"CN-65","宁夏":"CN-64","青海":"CN-63","甘肃":"CN-62","陕西":"CN-61","黑龙江":"CN-23","吉林":"CN-22","辽宁":"CN-21"},n=[],t=[],i=function(i,u){$("#dateRange").data("daterangepicker").setStartDate(i);$("#dateRange").data("daterangepicker").setEndDate(u);$.ajax({type:"GET",url:"/Tools/SiteAnalytics/GetVisitDistrictAnalytics?startDate="+i.format("YYYYMMDD")+"&endDate="+u.format("YYYYMMDD"),success:function(i){var u=JSON.parse(i).body.data[0].result,f,e,c;for(n=[],t=[],f="",e=0;e<u.items[0].length;e++){var s=u.items[0][e][0].name,h=r[s],o=u.items[1][e];n[h]=o[0];t[h]=o[1];f+="<tr>";f+="<td>"+(e+1)+"<\/td>";f+="<td>"+s+"<\/td>";f+="<td>"+o[0]+"<\/td>";f+='<td><span class="badge bg-olive">'+o[1]+"%<\/span><\/td>";f+="<\/tr>"}$("#pv_count").html(u.pageSum[0][0]);$("#visitor_count").html(u.pageSum[0][3]);$("#ip_count").html(u.pageSum[0][6]);$("#bounce_ratio").html(u.pageSum[0][7]+"%");$("#avg_visit_time").html(u.pageSum[0][8]+" s");c={map:"cn_mill",regionStyle:{initial:{fill:"rgba(210, 214, 222, 1)","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{"fill-opacity":.7,cursor:"pointer"},selected:{fill:"yellow"},selectedHover:{}},series:{regions:[{attribute:"fill",scale:["#C8EEFF","#0071A4"],normalizeFunction:"polynomial",values:n,legend:{horizontal:!0}}]},onRegionTipShow:function(i,r,u){var f="";f+='<div style="width:120px;">';f+='<div style="border-bottom:1px solid;padding-bottom:5px;">'+r.html()+"<\/div>";f+='<div style="margin-top:5px;"><i class="fa fa-circle text-success margin-r-5"><\/i>浏览量(PV)<span class="pull-right">';f+=typeof n[u]!="undefined"?n[u]:0;f+="<\/div>";f+='<div style="margin-top:5px;"><i class="fa fa-circle text-primary margin-r-5"><\/i>占比<span class="pull-right">';f+=typeof t[u]!="undefined"?t[u]:0;f+=" %<\/div>";r.html(f)}};$("#map-markers").empty();$("#map-markers").vectorMap(c);$("#districtTable tr:gt(0)").remove();$("#districtTable tbody").append(f)}})},u=function(n,t){$.ajax({type:"GET",url:"/Tools/SiteAnalytics/GetTrendAnalytics?startDate="+n.format("YYYYMMDD")+"&endDate="+t.format("YYYYMMDD"),success:function(n){for(var t=JSON.parse(n).body.data[0].result,r=[],u=[],f=[],e=[],i=t.items[1].length-1;i>=0;i--)isNaN(parseInt(t.items[1][i][0]))?r.push(0):r.push(t.items[1][i][0]),isNaN(parseInt(t.items[1][i][3]))?u.push(0):u.push(t.items[1][i][3]),isNaN(parseInt(t.items[1][i][6]))?f.push(0):f.push(t.items[1][i][6]),isNaN(parseInt(t.items[1][i][8]))?e.push(0):e.push(t.items[1][i][8]);$("#trend_pv_count >div").html(r.join(","));$("#trend_visitor_count >div").html(u.join(","));$("#trend_ip_count >div").html(f.join(","));$("#trend_avg_visit_time >div").html(e.join(","));$(".sparkbar").each(function(){var n=$(this);n.sparkline("html",{type:"bar",height:n.data("height")?n.data("height"):"30",barColor:n.data("color")})});$("#trend_pv_count >h5").html(t.pageSum[0][0]);$("#trend_visitor_count >h5").html(t.pageSum[0][3]);$("#trend_ip_count >h5").html(t.pageSum[0][6]);$("#trend_avg_visit_time >h5").html(t.pageSum[0][8]+" s")}})};$("#dateRange").daterangepicker({timePicker:!1,locale:{format:"YYYY-MM-DD",separator:" 至 ",applyLabel:"确定",cancelLabel:"取消",resetLabel:"重置"}},function(n,t){i(n,t);$('input[type="radio"]').iCheck("uncheck")});$("input:radio[name='rdDateRange']").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"});$("input:radio[name='rdDateRange']").on("ifChecked",function(){var n=moment(),t=moment();switch($(this).attr("id")){case"rdToday":n=moment();t=moment();break;case"rdYesterday":n=moment().subtract(1,"days");t=moment().subtract(1,"days");break;case"rdLast7Days":n=moment().subtract(6,"days");t=moment();break;case"rdLast30Days":n=moment().subtract(29,"days");t=moment();break;default:console.log("单选框选择有误！")}i(n,t)});i(moment().subtract(29,"days"),moment());u(moment().subtract(6,"days"),moment())}]);